!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AnkaMultiMeasure=e():t.AnkaMultiMeasure=e()}(window,(function(){return function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=7)}({7:function(t,e,a){"use strict";function n(t){this._clickData=[],this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onKeyUp=void 0===this.onKeyUp?this.onKeyUp.bind(this):this.onKeyUp,n._instances.push(this),this._labelDictionary=[],AnkaPanAPI.PanoPlugin.apply(this,[]),this._zoomLevels=[.6,.3,.1],this._rayCaster=new THREE.Raycaster;var e=AnkaPanAPI.PanoGL.getInstanceCount();e<0&&console.warn("MultiMeasurement Plugin should be created before PanoGL instance!");var a=e-1;if(n._colors.length<=a?this.rayColor=Math.round(16777215):this.rayColor=n._colors[a],this.ClassInstance=n,this.initialOptions=t,this._tempMesh=[],t)for(var o in t)this["_"+o]=t[o]}a.r(e),a.d(e,"MultiMeasurement",(function(){return n})),n.STATUS_EVENT="onStatus",n.STATUS={START:"START",POINT_ADDED:"POINT_ADDED",ANCHOR_ADDED:"ANCHOR_ADDED",POINT_REMOVE:"POINT_REMOVE",COMPLETE:"COMPLETE",MISSING_POINT:"MISSING_POINT",TRYING_MORE_POINT:"TRYING_MORE_POINT",BAD_COMPLETE:"BAD_COMPLETE",FAIL:"FAIL",FINISHED:"FINISHED"},n.TYPES={DEFAULT:"DEFAULT",POLYGON:"POLYGON",HLINE:"HLINE",SQUARE:"SQUARE"},Object.freeze(n.STATUS),Object.freeze(n.TYPES),n.prototype=Object.create(AnkaPanAPI.PanoPlugin.prototype),n.prototype.constructor=n,n._instances=[],n._colors=[16711680,65280,255,16776960,65535,16711935],n.clicks=[],n.prototype.prepare=function(){this.mScreen=new THREE.Scene;for(var t=this.baseObject.getPlugins(),e=0;e<t.length;e++)t[e]instanceof AnkaScalable.ScalablePlugin&&(this.scalable=t[e]),t[e]instanceof AnkaSoftText.SoftTextPlugin&&(this.softText=t[e]);var a=AnkaPanAPI.PanoGL;this.baseObject.addEvent(a.RENDER_AFTER_GROUND,this,this.renderAfterGround),this.baseObject.addEvent(a.DATA_CHANGE,this,this.onDataChange);var n=this;if(this.baseObject.getMultiMeasurePlugin=function(){return n},this.isStarted){this.startMultiMeasureInstance("",this.currentPolygonStyle),this.waitingForRayUpdateOnDataChange=!0}},n.prototype.renderAfterGround=function(){var t=this.baseObject,e=t.getRenderer(),a=t.getMainCamera();e.clearDepth(),e.render(this.mScreen,a)},n.prototype.onDataChange=function(t){this.waitingForRayUpdateOnDataChange&&(this.clearVisibleRays(),this.updateVisibleRayObjects(),this.waitingForRayUpdateOnDataChange=!0)},n.prototype.getRayObject=function(t,e){var a=t.ray.direction,n=Math.asin(a.y),o=Math.atan2(a.z,a.x)/Math.PI*180+90,s=t.lat,i=t.lon,r={lat:s,lon:i,alt:t.alt,endPoint:AnkaPanAPI.Utils.destinationPoint(s,i,100,o),yawDeg:o,pitch:n,direction:a};return r.id=e,r},n.prototype.getRayObject_deprecated=function(t,e){var a=t.getRayAt(0),n=a.ray.direction,o=Math.asin(n.y),s=Math.atan2(n.z,n.x)/Math.PI*180+90,i=a.lat,r=a.lon,l={lat:i,lon:r,alt:a.alt,endPoint:AnkaPanAPI.Utils.destinationPoint(i,r,100,s),yawDeg:s,pitch:o,direction:n};return l.id=e,l},n.prototype.getCross=function(t,e){var a=n.checkLineIntersection,o=t.endPoint,s=e.endPoint,i=new THREE.Vector3(t.lon,t.alt,t.lat),r=new THREE.Vector3(o.lon,t.alt,o.lat),l=new THREE.Vector3(e.lon,e.alt,e.lat),h=new THREE.Vector3(s.lon,e.alt,s.lat),c=a(i.x,i.z,r.x,r.z,l.x,l.z,h.x,h.z);if(c.l1&&c.l2){var u=AnkaPanAPI.Utils.haversine(i.z,c.y,i.x,c.x),p=Math.tan(t.pitch)*u+t.alt,y=AnkaPanAPI.Utils.haversine(l.z,c.y,l.x,c.x),d=(p+(Math.tan(e.pitch)*y+e.alt))/2;return{lat:c.y,lon:c.x,alt:d}}return null},n.prototype.clearVisibleRays=function(){for(var t=0;t<this._tempMesh.length;t++){var e=this._tempMesh[t].userData.m,a=e.material;e.parent.remove(e),this._tempMesh[t].parent.remove(this._tempMesh[t]),a.dispose()}this._tempMesh.length=0},n.prototype.createVisibleRay=function(t,e){var a=this.getCurrentData(),n=t,o=t.ray.direction,s=AnkaScalable.ScalablePlugin.loc2Pos(a,n.lon,n.lat,n.alt,this.scalable.camHegInPix,this.scalable.camHegInMet),i=Math.asin(o.y)-Math.PI/2,r=Math.atan2(o.x,o.z);this.epipolarLineGeom||(this.epipolarLineGeom=new THREE.CylinderBufferGeometry(2.5,2.5,4e3,32));var l=this.epipolarLineGeom,h=new THREE.MeshBasicMaterial({color:e,depthTest:!1,depthWrite:!1,transparent:!0,opacity:.4}),c=new THREE.Mesh(l,h),u=new THREE.Object3D;c.position.set(0,2e3,0),u.add(c),u.position.set(s.x,s.y,s.z),u.userData.m=c,u.rotation.set(i,r+Math.PI,0,"YXZ"),this.scalable.scalableScene.add(u),this._tempMesh.push(u),this.setDirty()},n.prototype._onClick=function(t){if(this._pointCount>0&&this._clickData.length===this._pointCount){var e={type:n.STATUS_EVENT,status:n.STATUS.TRYING_MORE_POINT,targetGeom:n.tempData};this.throwEventForEachInstance(e)}else{if(null!==this.getCurrentPointKey()){var a=this.getCurrentData(),o=a.lat,s=a.lon,i=a.altitude,r=new THREE.Vector2,l=this.baseObject.getMainCamera();r.x=t.offsetX/this.baseObject.getRendererDom().clientWidth*2-1,r.y=-t.offsetY/this.baseObject.getRendererDom().clientHeight*2+1,this._rayCaster.setFromCamera(r,l);var h=this._rayCaster.ray.direction,c={direction:{x:h.x,y:h.y,z:h.z}},u=Math.asin(h.y),p=Math.atan2(h.z,h.x),y=this.getAnchorObject(p,u),d={obj:y,clickPos:"#"+(this._clickData.length+1)};this.scalable.scalableScene.add(y),this._labelDictionary.push(d),this._clickData.push({lon:s,lat:o,alt:i,ray:c}),this.softText.addObject3D(y,this.baseObject.getMainCamera(),d.clickPos);var f=this.updateOtherInstances();this.throwAnchorEventForEachInstance(p),f&&this.throwClickEventForEachInstance()}}},n.prototype.getAnchorObject=function(t,e){if(!n.__anchorTexture){var a=AnkaPanAPI.AssetManager.getInstance().GetAssetNoCache("img/multi/crosshair.png");a.generateMipmaps=!1,a.minFilter=THREE.LinearFilter,n.__anchorTexture=a}if(!n.__anchorGeom){var o=new THREE.Geometry,s=new THREE.Vector3;o.vertices.push(s),n.__anchorGeom=o}var i=n.__anchorGeom,r=new THREE.PointsMaterial({size:25,transparent:!0,alphaTest:.5,sizeAttenuation:!1,map:n.__anchorTexture,depthTest:!0,color:this.rayColor}),l=new THREE.Points(i,r),h=1e3*Math.cos(t),c=1e3*Math.tan(e),u=1e3*Math.sin(t);return l.position.set(h,c,u),l},n.prototype.updateOtherInstances=function(){for(var t=0;t<n._instances.length;t++){var e=n._instances[t];e.clearVisibleRays(),e.updateVisibleRayObjects();var a=e.updateRays(),o=e.calculateTotalPositions(a);o?e.updateCommonGeometry(o):e.throwEvent({type:n.STATUS_EVENT,status:n.STATUS.FAIL,bo:e.baseObject.contentDV,message:e.calculateErros})}},n.prototype.throwClickEventForEachInstance=function(){for(var t=n._instances,e=0;e<t.length;e++)t[e].throwEvent({currentTarget:this,type:n.STATUS_EVENT,status:n.STATUS.POINT_ADDED,targetGeom:n.tempData})},n.prototype.throwAnchorEventForEachInstance=function(t){for(var e=n._instances,a=0;a<e.length;a++)e[a].throwEvent({currentTarget:this,anchorYDegree:2*Math.PI-t,type:n.STATUS_EVENT,status:n.STATUS.ANCHOR_ADDED,targetGeom:n.tempData})},n.prototype.getAttachedPanogl=function(){return this.baseObject},n.prototype.getRayAt=function(t){return t>-1&&t<this._clickData.length?this._clickData[t]:null},n.prototype.getRayCount=function(){return this._clickData.length},n.prototype.updateVisibleRayObjects=function(){for(var t=n._instances,e=0;e<t.length;e++){var a=t[e].getRayAt(this._clickData.length);a&&this.createVisibleRay(a,t[e].rayColor)}},n.prototype.updateRays=function(){for(var t=n._instances,e=[],a=0;a<t.length;a++){for(var o=t[a],s=[],i=0;i<o.getRayCount();i++)s.push(o.getRayAt(i));e.push(s)}return this.updatedRays=e,e},n.prototype.calculateTotalPositions=function(t){for(var e=[],a=0,n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)t[n][o].rayObject=this.getRayObject(t[n][o],a),a++;for(var s=[],i=[],r=-1,l=0;l<t.length;l++)for(var h=0;h<t[l].length;h++)t[l][h]&&h>=r&&(r=h+1);for(var c=0;c<r;c++){i.push({lat:0,lon:0,alt:0}),s[c]=[];for(var u=0;u<t.length;u++)for(var p=u;p<t.length;p++)if(t[u][c]&&t[p][c]){var y=t[u][c].rayObject,d=t[p][c].rayObject;if(y!==d){var f=this.getCross(y,d);f?s[c].push(f):e.push(u,c,p,c)}}}if(e.length>0)return this.calculateErros=e,null;for(var b=0;b<i.length;b++){for(var g=i[b],E=s[b],v=E.length,m=0;m<v;m++)g.lat+=E[m].lat,g.lon+=E[m].lon,g.alt+=E[m].alt;g.isValid=v>0,g.lat=g.lat/v,g.lon=g.lon/v,g.alt=g.alt/v}return i},n.prototype.updateCommonGeometry=function(t){for(var e=0,a=0;a<t.length;a++)t[a].isValid&&e++;var o=n.tempData;if(n.tempData?o.resetPoints():e>1&&((o=new AnkaScalable.GeomDataHolder(AnkaScalable.SLine,[],{})).type=AnkaScalable.GeomDataHolder.LINE,o.isDrawnData=!0,o.setStatus(AnkaScalable.GeomDataHolder.STATUS.DRAWING)),o)for(var s=0;s<e;s++)o.addPoint(t[s]);if(n.tempData){for(var i=o.layer.getLayerInstances(),r=0;r<i.length;r++)i[r].removeConnectedChildren(n.tempData);n.tempData=null}if(o){n.tempData||(n.tempData=o),this.layer?o.layer=this.layer:o.layer=this.scalable.getMainSketchLayer(),o.layer.addToList(o);for(var l=o.layer.getLayerInstances(),h=0;h<l.length;h++)l[h].drawGeometry(o);o.setStatus(AnkaScalable.GeomDataHolder.STATUS.COMPLETED)}this.scalable.updateSavedGeoms()},n.prototype.refreshEpipolars=function(){var t=this._clickData.length,e=t%this.pointCount,a=Math.floor(t/this.pointCount);this.clearVisibleRays();for(var n=0;n<a;n++){var o=n*this.pointCount+e;this.createVisibleRay(this._clickData[o])}},n.prototype.getClickedAreaCanvas=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),a=document.createElement("canvas"),n=a.getContext("2d"),o=this.baseObject.globalMouseOffsetX,s=this.baseObject.globalMouseOffsetY;t.width=100,t.height=100,a.width=100,a.height=100;var i=this.baseObject.getRenderer().context,r=new Uint8Array(4e4);i.readPixels(o-50,s-50,100,100,i.RGBA,i.UNSIGNED_BYTE,r);for(var l=n.createImageData(100,100),h=0;h<r.length;h+=4)l.data[h]=r[h],l.data[h+1]=r[h+1],l.data[h+2]=r[h+2],l.data[h+3]=r[h+3];return n.putImageData(l,0,0),e.save(),e.scale(1,-1),e.drawImage(a,0,-100),e.restore(),e.beginPath(),e.moveTo(50,0),e.lineTo(50,100),e.moveTo(0,50),e.lineTo(100,50),e.strokeStyle="#ffffff",e.lineWidth=1,e.stroke(),t},n.prototype.getCurrentPointKey=function(){return this.baseObject&&this.baseObject.dataParser.currentPoint?this.baseObject.dataParser.currentPoint.latlon:null},n.prototype.getCurrentData=function(){return this.baseObject&&this.baseObject.dataParser.currentPoint?this.baseObject.dataParser.currentPoint:null},n.prototype.startMultiMeasure=function(t,e,a){var o=n.TYPES;e===o.SQUARE||e===o.HLINE?a=2:a||(a=-1);for(var s=0;s<n._instances.length;s++)n._instances[s].startMultiMeasureInstance(t,e,a);this.throwEvent({type:n.STATUS_EVENT,status:n.STATUS.START})},n.prototype.startMultiMeasureInstance=function(t,e,a){this.isStarted=!0,this.calculateErros="",this.layer=t||this.scalable.getMainSketchLayer(),this.currentPolygonStyle=e,this._pointCount=a,this.scalable.disableMouse(),this.currentPoint=0,this.wasArrowHidden=this.baseObject.getArrowVisibility(),this.baseObject.setArrowVisibility(!1),this.baseObject.getGroundMaster().disableNavigation(),this.baseObject.disableGroundNav(!0),this.magnifier=new AnkaDraw.Magnifier(this.baseObject.contentDV);var n=this.baseObject.getRendererDom();n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),this.baseObject.addEvent(AnkaPanAPI.PanoGL.MOUSE_LEAVE,this,this.onMouseLeave),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},n.prototype.stopMultiMeasure=function(t){if(this.keyUpFunction&&document.removeEventListener("keyup",this.keyUpFunction),void 0!==this.wasArrowHidden&&this.baseObject.setArrowVisibility(this.wasArrowHidden),this.wasArrowHidden=void 0,this.scalable.enableMouse(),this.currentPoint=NaN,this._labelDictionary)for(var e=0;e<this._labelDictionary.length;e++){var a=this._labelDictionary[e].obj;this.softText.removeObject3D(a),a.parent&&(a.parent.remove(a),a.material.dispose())}this.clearVisibleRays(),this._labelDictionary=[],this._clickData=[],this._tempMesh.length=0,this.allowClick=!1,this.clickCount=NaN,this.pointCount=NaN,this.baseObject.getGroundMaster().enableNavigation(),this.baseObject.disableGroundNav(!1),AnkaPanAPI.CursorManager.setCursor("auto",-1,!0),this.allowMagnifier=!1,this.magnifier&&this.magnifier.dispose(),this.isStarted=!1;var n=this.baseObject.getRendererDom();n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),this.baseObject.removeEvent(AnkaPanAPI.PanoGL.MOUSE_LEAVE,this.onMouseLeave),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.setDirty(),t&&this.scalable.updateSavedGeoms()},n.prototype.notifyNewInstance=function(){if(this.isStarted)for(var t=0;t<n._instances.length;t++){var e=n._instances[t];e.isStarted=this.isStarted,e.currentPolygonStyle=this.currentPolygonStyle}},n.prototype.onMouseLeave=function(t){this.magnifier&&this.magnifier.hide(),this.allowMagnifier=!1},n.prototype.onMouseDown=function(t){0===t.button&&(this.mouseDownX=t.offsetX,this.mouseDownY=t.offsetY)},n.prototype.onMouseUp=function(t){0===t.button?(Math.abs(this.mouseDownX-t.offsetX)<2&&Math.abs(this.mouseDownY-t.offsetY)<2&&this._onClick(t),this.mouseDownX=NaN,this.mouseDownY=NaN):1===t.button?this.removePreviousPoint():2===t.button&&this.stopMultiMeasureInAllInstances(!0)},n.prototype.stopMultiMeasureInAllInstances=function(t){if(t){if(this.isStarted){var e=this.updateRays(),a=this.calculateTotalPositions(e),o=0;if(a)for(var s=0;s<a.length;s++)a[s].isValid&&o++;if(this._pointCount>0&&this._pointCount!==o){var i={type:n.STATUS_EVENT,status:n.STATUS.MISSING_POINT,targetGeom:n.tempData};this.throwEventForEachInstance(i)}else{var r;if(this.isStarted=!1,this._clearTempMesh(),o>0){var l=o;if(1===l)r=new AnkaScalable.GeomDataHolder(AnkaScalable.SPoint,[],{});else if(2===l&&this.currentPolygonStyle===n.TYPES.SQUARE){for(var h=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,u=0;u<a.length;u++)a[u].alt>h&&(h=a[u].alt),a[u].alt<c&&(c=a[u].alt);var p=a[0],y=a[1],d={lon:p.lon,lat:p.lat,alt:h},f={lon:y.lon,lat:y.lat,alt:h},b={lon:y.lon,lat:y.lat,alt:c},g={lon:p.lon,lat:p.lat,alt:c};(r=new AnkaScalable.GeomDataHolder(AnkaScalable.SPolygon,[],{})).addPoint(d),r.addPoint(f),r.addPoint(b),r.addPoint(g)}else 2===l&&this.currentPolygonStyle===n.TYPES.HLINE?r=new AnkaScalable.GeomDataHolder(AnkaScalable.SHLine,[],{}):l>1&&this.currentPolygonStyle===n.TYPES.DEFAULT?r=new AnkaScalable.GeomDataHolder(AnkaScalable.SLine,[],{}):l>2&&this.currentPolygonStyle===n.TYPES.POLYGON?r=new AnkaScalable.GeomDataHolder(AnkaScalable.SPolygon,[],{}):(this.calculateErros+="Not enough points for creating selected type geometry",t=!1);if(r){if(this.currentPolygonStyle!==n.TYPES.SQUARE)for(var E=0;E<l;E++)r.addPoint(a[E]);r.isDrawnData=!0,r.layer=this.layer,r.setStatus(AnkaScalable.GeomDataHolder.STATUS.COMPLETED),this.layer.addToList(r);for(var v=this.layer.getLayerInstances(),m=0;m<v.length;m++)v[m].drawGeometry(r)}this.throwCompleteEventForEachInstance(t,r)}else this.calculateErros+="Not enough points for creating selected type geometry",t=!1,this.throwCompleteEventForEachInstance(t,r);for(var T=n._instances,S=0;S<T.length;S++)T[S].stopMultiMeasure(t)}}}else{for(var P=n._instances,A=0;A<P.length;A++)P[A].stopMultiMeasure(t);this._clearTempMesh()}},n.prototype._clearTempMesh=function(){if(n.tempData){for(var t=this.layer.getLayerInstances(),e=0;e<t.length;e++)t[e].removeConnectedChildren(n.tempData);this.layer.isSketchLayer?this.layer.removeFromCommonList(n.tempData):console.log("Not impelemeted?"),n.tempData=null}},n.prototype.removePreviousPoint=function(){if(this._clickData.length>0){var t=this._clickData.length-1;this._clickData.splice(t,1);var e=this._labelDictionary.splice(t,1);if(e&&e.length>0){this.softText.removeObject3D(e[0].obj);var a=e[0].obj;a.parent&&(a.parent.remove(a),a.material.dispose())}this.updateOtherInstances(),this.throwRemovePointEventForEachInstance()}},n.prototype.throwRemovePointEventForEachInstance=function(){for(var t=n._instances,e=0;e<t.length;e++)t[e].throwEvent({type:n.STATUS_EVENT,status:n.STATUS.POINT_REMOVE,targetGeom:n.tempData})},n.prototype.throwEventForEachInstance=function(t){for(var e=n._instances,a=0;a<e.length;a++)e[a].throwEvent(t)},n.prototype.throwCompleteEventForEachInstance=function(t,e){for(var a=n._instances,o=0;o<a.length;o++)t?(a[o].throwEvent({type:n.STATUS_EVENT,isSuccessful:t,status:n.STATUS.COMPLETE,drawType:e.type,targetGeom:e}),a[o].throwEvent({type:n.STATUS_EVENT,isSuccessful:t,status:n.STATUS.FINISHED,drawType:e.type,targetGeom:e})):a[o].throwEvent({type:n.STATUS_EVENT,isSuccessful:t,message:this.calculateErros,status:n.STATUS.BAD_COMPLETE,targetGeom:e})},n.prototype.onKeyUp=function(t){27===t.keyCode?this.stopMultiMeasureInAllInstances(!1):16===t.keyCode&&(this.magnifier.hide(),this.allowMagnifier=!1)},n.prototype.onKeyDown=function(t){this.baseObject.isUserActive&&16===t.keyCode&&(this.magnifier.show(),this.allowMagnifier=!0,this.onMouseMove())},n.prototype.onMouseMove=function(t){this.allowMagnifier&&this.magnifier&&(t?this.magnifier.renderImage(this.baseObject,t.offsetX,t.offsetY):this.magnifier.renderImage(this.baseObject,this.baseObject.globalMouseOffsetX,this.baseObject.globalMouseOffsetY)),AnkaPanAPI.PanoGL.isPointerOnClickableObject?AnkaPanAPI.CursorManager.setCursor("auto",-1,!0):AnkaPanAPI.CursorManager.setCursor("crosshair",666)},n.checkLineIntersection=function(t,e,a,n,o,s,i,r){var l,h,c,u,p={x:null,y:null,l1:!1,l2:!1};return 0===(l=(r-s)*(a-t)-(i-o)*(n-e))||(u=(a-t)*(h=e-s)-(n-e)*(c=t-o),h=((i-o)*h-(r-s)*c)/l,c=u/l,p.x=t+h*(a-t),p.y=e+h*(n-e),h>0&&h<1&&(p.l1=!0),c>0&&c<1&&(p.l2=!0)),p}}})}));
//# sourceMappingURL=bundle.AnkaMultiMeasure.js.map